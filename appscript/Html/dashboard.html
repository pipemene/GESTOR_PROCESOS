<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Panel</title>
  <link rel="stylesheet" href="styles.css">
  <?!= include('appscript/Html/partials'); ?>
</head>
<body class="bg">
  <div class="nav">
    <div class="brand">BLUE HOME INMOBILIARIA</div>
    <div class="nav-links">
      <a href="?p=dashboard" class="active">Panel</a>
      <a href="?p=new">Nueva Orden</a>
    </div>
  </div>

  <div class="container">
    <div class="card">
      <h2>Últimas órdenes</h2>
      <div id="orders"></div>
    </div>
  </div>

  <script>
    function renderOrders(list){
      const el = document.getElementById('orders');
      if (!list.length) { el.innerHTML = '<p class="muted">Sin órdenes.</p>'; return; }
      el.innerHTML = list.map(o => `
        <div class="row">
          <div><b>${o.codigo||'—'}</b> · ${new Date(o.createdAt).toLocaleString()}</div>
          <div>${o.inquilino||'—'} · ${o.descripcion||''}</div>
          <div><span class="badge">${o.estado||'—'}</span></div>
        </div>
      `).join('');
    }
    google.script.run.withSuccessHandler(renderOrders).listOrdersLight();
  </script>
</body>
</html>
