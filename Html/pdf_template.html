<!-- Html/pdf_template.html — Plantilla PDF con membrete -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    @page { size: A4; margin: 18mm 14mm; }
    body { font-family: Arial, sans-serif; font-size: 12px; color: #111; }
    header { border-bottom: 2px solid #0b3a67; padding-bottom: 8px; margin-bottom: 12px; }
    .brand { font-size: 18px; font-weight: bold; color: #0b3a67; }
    .muted { color: #555; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px 16px; }
    .full { grid-column: 1 / -1; }
    .box { border: 1px solid #ddd; padding: 8px; border-radius: 6px; }
    h2 { margin: 8px 0; }
    .photos img { width: 100%; max-height: 200px; object-fit: cover; border: 1px solid #ccc; border-radius: 4px; }
    footer { border-top: 1px solid #ddd; margin-top: 12px; padding-top: 6px; font-size: 11px; }
  </style>
</head>
<body>
  <header>
    <div class="brand"><?= BRAND.company ?></div>
    <div class="muted"><?= BRAND.address ?> · Tel: <?= BRAND.phone ?> · <?= BRAND.web ?> · <?= BRAND.email ?></div>
  </header>

  <h2>Orden de servicio / salida · <?= order.orderId ?></h2>

  <div class="grid box">
    <div><b>Cliente:</b> <?= order.clientName ?> (<?= order.clientId ?>)</div>
    <div><b>Teléfono:</b> <?= order.clientPhone ?></div>
    <div class="full"><b>Inmueble:</b> <?= order.propertyAddress ?></div>
    <div class="full"><b>Descripción:</b> <?= order.issue ?></div>
    <div><b>Prioridad:</b> <?= order.priority ?></div>
    <div><b>Estado:</b> <?= order.status ?></div>
    <div><b>Programada:</b> <?= order.scheduledAt ?></div>
    <div><b>Finalizada:</b> <?= order.finishedAt ?></div>
  </div>

  <h3>Fotos</h3>
  <div class="photos grid">
    <? for (var i=0; i<photos.length; i++) { ?>
      <div><img src="https://drive.google.com/uc?export=view&id=<?= photos[i].id ?>"></div>
    <? } ?>
  </div>

  <h3>Firma del cliente</h3>
  <? if (order.signatureFileId) { ?>
    <img src="https://drive.google.com/uc?export=view&id=<?= order.signatureFileId ?>" style="max-height:150px; border:1px solid #ccc; padding:4px; border-radius:4px;">
  <? } else { ?>
    <div class="muted">Sin firma registrada.</div>
  <? } ?>

  <h3>Observaciones</h3>
  <div class="box"><?= order.notes || 'N/A' ?></div>

  <footer>
    Documento generado automáticamente por Blue Home Inmobiliaria – Gestor de Reparaciones.
  </footer>
</body>
</html>
